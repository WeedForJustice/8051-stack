C51 COMPILER V9.60.0.0   MAIN                                                              06/29/2020 23:32:05 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.exe src\main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\
                    -main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <AT89X52.H>
   2          #include "../inc/frog.h"
   3          
   4          u8 delaycount = 0;
   5          u8 pitch_pos = 0;
   6          
   7          u8 dotm_buf[8];
   8          
   9          void main(void)
  10          {
  11   1          sp_init();
  12   1      
  13   1          for (;;)
  14   1          {
  15   2              dotm_put(dotm_buf);
  16   2          }
  17   1      }
  18          
  19          code u8 pitch_TH[] = {
  20              0xF8, 0xF8, 0xF9, 0xF9, 0xFA, 0xFA, 0xFA, 0xFB, 0xFB, 0xFB, 0xFB, 0xFC,
  21              0xFC, 0xFC, 0xFC, 0xFC, 0xFD, 0xFD, 0xFD, 0xFD, 0xFD, 0xFD, 0xFD, 0xFE};
  22          
  23          code u8 pitch_TL[] = {
  24              0x88, 0xF4, 0x59, 0xB8, 0x13, 0x68, 0xB8, 0x04, 0x4C, 0x8F, 0xCF, 0x0B,
  25              0x44, 0x7A, 0xAC, 0xDC, 0x09, 0x34, 0x5C, 0x82, 0xA6, 0xC7, 0xE7, 0x05};
  26          
  27          void onBtnPress(void) interrupt 0
  28          {
  29   1          EX0 = 0;
  30   1      
  31   1          TH1 = (65536 - 50000) / 256;
  32   1          TL1 = (65536 - 50000) % 256;
  33   1          TR1 = 1;
  34   1      
  35   1          TH0 = pitch_TH[pitch_pos];
  36   1          TL0 = pitch_TL[pitch_pos];
  37   1          TR0 = 1;
  38   1      }
  39          
  40          void onTimer0(void) interrupt 1 // Speaker oscillator
  41          {
  42   1          TH0 = pitch_TH[pitch_pos];
  43   1          TL0 = pitch_TL[pitch_pos];
  44   1          SP = !SP;
  45   1      }
  46          
  47          void onTimer1(void) interrupt 3 // Speaker note timer
  48          {
  49   1          if (delaycount > 2)
  50   1          {
  51   2              TR0 = TR1 = 0;
  52   2              if (pitch_pos < 19)
  53   2                  pitch_pos++;
  54   2              else
C51 COMPILER V9.60.0.0   MAIN                                                              06/29/2020 23:32:05 PAGE 2   

  55   2                  pitch_pos = 0;
  56   2              delaycount = 0;
  57   2              EX0 = 1;
  58   2          }
  59   1          else
  60   1          {
  61   2              TH1 = (65536 - 50000) / 256;
  62   2              TL1 = (65536 - 50000) % 256;
  63   2              delaycount++;
  64   2              TR1 = 1;
  65   2          }
  66   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    144    ----
   CONSTANT SIZE    =     48    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     10    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
